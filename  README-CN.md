Apex Specialist Superbadge
---

## ğŸ“˜ ä¸€ã€èƒŒæ™¯éœ€æ±‚ç®€è¿°

**HowWeRoll Rentals** æ˜¯ä¸€å®¶å…¨çƒæ€§çš„æˆ¿è½¦ç§Ÿèµå…¬å¸ï¼Œéšç€è½¦é˜Ÿå’Œå®¢æˆ·è§„æ¨¡å¿«é€Ÿå¢é•¿ï¼Œç°æœ‰çš„ **ç»´ä¿®ä¸ç»´æŠ¤æµç¨‹æ— æ³•æ‰©å±•**ã€‚å…¬å¸å¸Œæœ›é€šè¿‡ Salesforce è‡ªåŠ¨åŒ–æ—¥å¸¸ç»´æŠ¤å·¥ä½œï¼Œå¹¶ä¸ä»“åº“ç®¡ç†ç³»ç»Ÿè¿›è¡Œé›†æˆï¼Œå®ç°ï¼š

1. **è‡ªåŠ¨ç”Ÿæˆæ—¥å¸¸ç»´æŠ¤è¯·æ±‚**ï¼ˆRoutine Maintenanceï¼‰ï¼›
2. **ä¸ä»“åº“ç³»ç»ŸåŒæ­¥è®¾å¤‡åº“å­˜å’Œä¿¡æ¯**ï¼›
3. **é€šè¿‡è°ƒåº¦ä»»åŠ¡å®šæœŸæ‰§è¡ŒåŒæ­¥æ“ä½œ**ï¼›
4. **ç¡®ä¿é«˜å¯ç”¨æ€§ã€å¯æ‰©å±•æ€§ä¸æµ‹è¯•å®Œæ•´æ€§**ã€‚

---

## âš™ï¸ äºŒã€ä¸»è¦åŠŸèƒ½ä¸ä½¿ç”¨åœºæ™¯

| åŠŸèƒ½           | åœºæ™¯è¯´æ˜                                                                              |
| ------------ | --------------------------------------------------------------------------------- |
| **è‡ªåŠ¨ç”Ÿæˆç»´æŠ¤è¯·æ±‚** | å½“æŸä¸ªç»´ä¿®å·¥å•ï¼ˆCaseï¼‰å…³é—­æ—¶ï¼Œè‹¥ç±»å‹ä¸º `Repair` æˆ– `Routine Maintenance`ï¼Œç³»ç»Ÿåº”åˆ›å»ºä¸€ä¸ªæ–°çš„æ—¥å¸¸ç»´æŠ¤è¯·æ±‚ï¼Œä»¥ä¾¿è¿›è¡Œä¸‹ä¸€è½®ä¿å…»ã€‚ |
| **è®¡ç®—ä¸‹æ¬¡ç»´æŠ¤æ—¶é—´** | æ ¹æ®å…³è”çš„è®¾å¤‡ï¼ˆEquipmentï¼‰çš„ç»´æŠ¤å‘¨æœŸï¼Œç³»ç»Ÿè‡ªåŠ¨è®¾å®šä¸‹æ¬¡ç»´æŠ¤çš„åˆ°æœŸæ—¥ï¼ˆå–æœ€çŸ­å‘¨æœŸï¼‰ã€‚                                    |
| **è®¾å¤‡-ç»´æŠ¤å…³è”**  | æ¯æ¬¡ç»´æŠ¤è¯·æ±‚ä¸­éœ€è®°å½•ä½¿ç”¨äº†å“ªäº›è®¾å¤‡ï¼ˆEquipmentMaintenanceItemï¼‰ï¼Œå¹¶ä¸ºæ–°è¯·æ±‚æ–°å»ºè®°å½•ã€‚                            |
| **ä¸ä»“åº“ç³»ç»Ÿé›†æˆ**  | Salesforce å‘å¤–éƒ¨ç³»ç»Ÿå‘èµ· REST è°ƒç”¨ï¼Œè·å–åº“å­˜å’Œè®¾å¤‡æ•°æ®å¹¶è¿›è¡ŒåŒæ­¥æ›´æ–°ã€‚                                      |
| **æ¯å¤©è‡ªåŠ¨åŒæ­¥åº“å­˜** | è°ƒåº¦ä»»åŠ¡åœ¨æ¯æ—¥å‡Œæ™¨ 1:00 è‡ªåŠ¨è¿è¡ŒåŒæ­¥æ“ä½œï¼Œç¡®ä¿ HQ æ¯å¤©æ—©ä¸Šæœ‰æœ€æ–°æ•°æ®ã€‚                                          |

---

## ğŸ§± ä¸‰ã€å¯¹è±¡è®¾è®¡æ¦‚è§ˆï¼ˆObject Modelï¼‰

| å¯¹è±¡                               | æè¿°             | å…³é”®å­—æ®µ                                                                                                            |
| -------------------------------- | -------------- | --------------------------------------------------------------------------------------------------------------- |
| `Case`ï¼ˆé‡å‘½åä¸º Maintenance Requestï¼‰ | è¡¨ç¤ºç»´æŠ¤è¯·æ±‚         | `Type`, `Status`, `Vehicle__c`, `Subject`, `Report_Date__c`, `Due_Date__c`                                      |
| `Product2`ï¼ˆé‡å‘½åä¸º Equipmentï¼‰       | ç»´ä¿®å’Œç»´æŠ¤ä¸­ä½¿ç”¨çš„è®¾å¤‡    | `Maintenance_Cycle__c`, `Lifespan_Months__c`, `Warehouse_SKU__c`, `Current_Inventory__c`, `Replacement_Part__c` |
| `Vehicle__c`                     | æˆ¿è½¦è½¦è¾†è®°å½•         | `Name`, `VIN__c`, ç­‰                                                                                             |
| `Equipment_Maintenance_Item__c`  | ä¸­é—´å¯¹è±¡ï¼Œè¿æ¥è®¾å¤‡ä¸ç»´æŠ¤è¯·æ±‚ | `Maintenance_Request__c`, `Equipment__c`                                                                        |

![img.png](img.png)
---

## ğŸ§ª å››ã€æµ‹è¯•åœºæ™¯ä¸æ¸…å•

### âœ… A. è‡ªåŠ¨åˆ›å»ºç»´æŠ¤è¯·æ±‚

| æµ‹è¯•é¡¹       | å†…å®¹                                                                   |
| --------- | -------------------------------------------------------------------- |
| æ­£å¸¸æµç¨‹æµ‹è¯•    | åˆ›å»ºä¸€ä¸ªç±»å‹ä¸º `Repair` çš„ Caseï¼Œå…³é—­åè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ–°çš„ `Routine Maintenance` è¯·æ±‚         |
| å¤šè®¾å¤‡è®¡ç®—ç»´æŠ¤å‘¨æœŸ | è¯·æ±‚ä¸­å…³è”å¤šä¸ªè®¾å¤‡ï¼Œç³»ç»Ÿå–ç»´æŠ¤å‘¨æœŸæœ€çŸ­çš„è®¾å¤‡è¿›è¡Œ `Due Date` è®¡ç®—                               |
| æ— éœ€è§¦å‘æµ‹è¯•    | Type ä¸æ˜¯ `Repair` / `Routine Maintenance`ï¼Œæˆ– Status â‰  Closed æ—¶ï¼Œä¸åº”åˆ›å»ºæ–°è¯·æ±‚ |
| æ‰¹é‡å¤„ç†æµ‹è¯•    | æ‰¹é‡æ’å…¥å¹¶å…³é—­ 300 æ¡è®°å½•ï¼Œç¡®ä¿ç³»ç»Ÿå¯ä»¥æˆåŠŸå¤„ç†ï¼ˆæ— å¼‚å¸¸ï¼‰                                      |
| æ–°æ—§æ•°æ®éš”ç¦»æµ‹è¯•  | æ–°åˆ›å»ºçš„ `EquipmentMaintenanceItem` ä¸åº”æŒ‡å‘åŸå§‹è¯·æ±‚ï¼Œåº”æ–°å»ºå¹¶å…³è”æ–°è¯·æ±‚                   |

---

### âœ… B. å¤–éƒ¨ç³»ç»ŸåŒæ­¥ï¼ˆREST Calloutï¼‰

| æµ‹è¯•é¡¹     | å†…å®¹                                                                                                          |
| ------- | ----------------------------------------------------------------------------------------------------------- |
| æ¨¡æ‹Ÿè¿”å›å€¼å¤„ç† | ä½¿ç”¨ `HttpCalloutMock` æ¨¡æ‹Ÿ JSON å“åº”ï¼ŒéªŒè¯å­—æ®µæ­£ç¡®è§£æå¹¶ upsert                                                            |
| å¤–éƒ¨IDæ›´æ–°  | ä½¿ç”¨ `Warehouse_SKU__c` ä½œä¸º External ID æ›´æ–°å·²æœ‰ Equipment æ•°æ®                                                      |
| å­—æ®µæ˜ å°„æ­£ç¡®æ€§ | `Cost__c`, `Current_Inventory__c`, `Replacement_Part__c`, `Lifespan_Months__c`, `Maintenance_Cycle__c` æ­£ç¡®å†™å…¥ |

---

### âœ… C. è°ƒåº¦ä»»åŠ¡æµ‹è¯•ï¼ˆSchedulerï¼‰

| æµ‹è¯•é¡¹      | å†…å®¹                                                         |
| -------- | ---------------------------------------------------------- |
| ä»»åŠ¡è°ƒåº¦æˆåŠŸ   | ä½¿ç”¨ `System.schedule()` è§¦å‘è°ƒåº¦ç±»ï¼Œå¹¶åœ¨ `Test.stopTest()` åéªŒè¯ä»»åŠ¡å·²æ’é˜Ÿ |
| è°ƒç”¨é“¾æ‰§è¡Œæ— å¼‚å¸¸ | è°ƒç”¨è°ƒåº¦ä»»åŠ¡ â†’ è°ƒç”¨ Callout Service â†’ æ­£å¸¸å®Œæˆæ‰€æœ‰æ›´æ–°æ“ä½œ                   |

---

### âœ… D. è¦†ç›–ç‡ä¸æ–­è¨€å®Œæ•´æ€§

| è¦æ±‚               | è¯´æ˜                                                    |
| ---------------- | ----------------------------------------------------- |
| Apex ä»£ç è¦†ç›–ç‡è¾¾ 100% | æ‰€æœ‰ triggerã€handlerã€serviceã€schedulerã€test ç±»å¿…é¡» 100% è¦†ç›– |
| åŒ…å«æ­£è´Ÿåœºæ™¯æ–­è¨€         | `System.assert()` ç”¨äºéªŒè¯æ•°æ®æ˜¯å¦æŒ‰é¢„æœŸç”Ÿæˆæˆ–æœªç”Ÿæˆ                   |
| å¼‚å¸¸å¤„ç†æµ‹è¯•           | è‹¥ JSON å¼‚å¸¸æˆ–æ— å“åº”ï¼Œåº”ä¼˜é›…å¤±è´¥ï¼Œä¸æŠ›å‡ºç³»ç»Ÿé”™è¯¯                           |

---

## ğŸ§© äº”ã€è¡¥å……å»ºè®®

* æ‰€æœ‰ç±»åã€å­—æ®µåè¯·ä¸¥æ ¼æŒ‰ç…§ Superbadge è¦æ±‚å‘½åï¼›
* ä¸è¦ç¡¬ç¼–ç  IDï¼Œä½¿ç”¨åŠ¨æ€æŸ¥è¯¢æˆ–æµ‹è¯•æ•°æ®å·¥å‚ï¼›
* è°ƒè¯•æ—¶ä½¿ç”¨ `System.debug()` é€æ­¥åˆ†æï¼›
* æ³¨æ„é€»è¾‘ä¸è§¦å‘æ¡ä»¶çš„åˆ†ç¦»ï¼šTrigger â†’ Helper â†’ Service/Utilityï¼›
* ç¡®ä¿ä½¿ç”¨ @future/@testSetup/@isTest å…³é”®å­—è§„èŒƒåˆç†ã€‚

---


## ğŸ”§ å…­ã€ æ“ä½œéªŒè¯æ­¥éª¤

---

### ğŸ§¾ **ä¸€ã€æ•°æ®å‡†å¤‡ï¼ˆåªéœ€æ“ä½œä¸€æ¬¡ï¼‰**

#### 1. åˆ›å»º Playground æˆ– Developer Org

è¿›å…¥ Trailheadï¼Œç‚¹å‡» Superbadge é¡µé¢ â†’ ç‚¹å‡» â€œLaunchâ€ åˆ›å»ºæ–°çš„ Playgroundã€‚

#### 2. å®‰è£… Superbadge Package

* ä½¿ç”¨ä»¥ä¸‹é“¾æ¥å®‰è£…ï¼š
  `https://login.salesforce.com/packaging/installPackage.apexp?p0=04t6g000008av9iAAA`

#### 3. æ›´æ–°å­—æ®µä¸å¸ƒå±€

* ç»™ **Case å¯¹è±¡çš„ Type å­—æ®µ**æ·»åŠ  Picklist å€¼ï¼š

    * `Repair`
    * `Routine Maintenance`
* å°† **Case é¡µé¢å¸ƒå±€**åˆ†é…ä¸ºï¼š`Case (HowWeRoll) Layout`
* å°† **Product2 é¡µé¢å¸ƒå±€**åˆ†é…ä¸ºï¼š`Product (HowWeRoll) Layout`
* é‡å‘½åæ ‡ç­¾ï¼š

    * Case â†’ Maintenance Request
    * Product â†’ Equipment

#### 4. åˆ›å»ºé»˜è®¤æ•°æ®ï¼ˆç³»ç»Ÿæ ·æœ¬ï¼‰

* æ‰“å¼€ App Launcher â†’ æœç´¢å¹¶æ‰“å¼€ **How We Roll Maintenance** App
* ç‚¹å‡» **Create Default Data** ç”Ÿæˆæ ·æœ¬æ•°æ®ï¼ˆEquipmentã€Vehicleã€Caseç­‰ï¼‰

---

### ğŸ” **äºŒã€éªŒè¯ï¼šè‡ªåŠ¨åˆ›å»ºç»´æŠ¤è¯·æ±‚**

#### âœ… æ­£é¢æµ‹è¯•æ­¥éª¤

1. æ‰“å¼€ä»»æ„ä¸€ä¸ªå·²ç”Ÿæˆçš„ Maintenance Requestï¼ˆCaseï¼‰ï¼š

    * Type: `Repair`
    * Status: `Closed`ï¼ˆå¦‚æ²¡æœ‰åˆ™ç¼–è¾‘ä¸º Closedï¼‰

2. ç¡®è®¤å…¶å…³è”äº†ï¼š

    * è‡³å°‘ä¸€ä¸ª EquipmentMaintenanceItem
    * Equipment å’Œ Vehicle å·²å…³è”

3. ä¿å­˜è®°å½•

4. éªŒè¯æ˜¯å¦è‡ªåŠ¨åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ Maintenance Requestï¼š

    * Type: `Routine Maintenance`
    * Subject ä¸ä¸ºç©º
    * Report Date = ä»Šå¤©
    * Due Date = ä»Šå¤© + æœ€çŸ­è®¾å¤‡ç»´æŠ¤å‘¨æœŸ
    * æ–°çš„ EquipmentMaintenanceItem åˆ›å»ºå¹¶æŒ‡å‘æ–°çš„ Request
5. æ‰¹é‡éªŒè¯ï¼š

   * ä½¿ç”¨åŒ¿å Apex åœ¨ Dev Console æˆ– VS Code ä¸­æ’å…¥ **300 ä¸ª Case è®°å½•** å¹¶å…³é—­å®ƒä»¬ï¼Œç„¶åæ£€æŸ¥æ˜¯å¦æˆåŠŸæ‰¹é‡åˆ›å»ºäº† 300 ä¸ªæ–° Maintenance Requestã€‚

```apex
List<Case> caseList = new List<Case>();
for (Integer i = 0; i < 300; i++) {
    caseList.add(new Case(
        Subject='Repair Job ' + i,
        Type='Repair',
        Status='Closed',
        Origin='Phone',
        Vehicle__c='a01XXXXXXXXXXXX', // æ›¿æ¢ä¸ºæœ‰æ•ˆçš„ Vehicle ID
        // éœ€è¦æ‰‹åŠ¨æ’å…¥å¯¹åº”çš„ EquipmentMaintenanceItem
    ));
}
insert caseList;
```

#### âŒ è´Ÿé¢æµ‹è¯•æ­¥éª¤

1. åˆ›å»ºä¸€ä¸ª Type = `Other` æˆ– Status â‰  `Closed` çš„ Case
2. ä¿å­˜åç¡®è®¤ **æ²¡æœ‰** ç”Ÿæˆæ–°çš„ Maintenance Request

---

### ğŸ“¦ **ä¸‰ã€éªŒè¯ï¼šREST è°ƒç”¨åŒæ­¥å¤–éƒ¨è®¾å¤‡æ•°æ®**

#### ä½¿ç”¨ Apex æ‰§è¡ŒåŒæ­¥æ–¹æ³•ï¼ˆæ¨¡æ‹Ÿ calloutï¼‰

```apex
System.enqueueJob(new WarehouseCalloutService());
```

#### éªŒè¯ç»“æœï¼š

* è¿›å…¥ Equipmentï¼ˆProductï¼‰åˆ—è¡¨
* æ‰¾åˆ°è¢«æ›´æ–°/æ’å…¥çš„è®°å½•ï¼ˆé€šè¿‡ Warehouse\_SKU\_\_cï¼‰
* ç¡®è®¤å­—æ®µæ˜¯å¦æ›´æ–°ï¼š

    * Cost
    * Current Inventory
    * Replacement Part = true
    * Lifespan
    * Maintenance Cycle

---

### â° **å››ã€éªŒè¯ï¼šå®šæ—¶è°ƒåº¦åŒæ­¥ä»»åŠ¡**

#### æ‰‹åŠ¨è°ƒåº¦ä¸€æ¬¡ä»»åŠ¡éªŒè¯ï¼ˆç”¨ Schedule Apexï¼‰

```apex
String jobId = System.schedule(
    'Daily Sync',
    '0 0 1 * * ?', // æ¯å¤©å‡Œæ™¨1ç‚¹
    new WarehouseSyncSchedule() // æ›¿æ¢ä¸ºä½ çš„ç±»å
);
System.debug('Scheduled Job ID: ' + jobId);
```

#### éªŒè¯æ–¹å¼ï¼š

1. æŸ¥çœ‹ Setup â†’ Scheduled Jobsï¼Œç¡®è®¤ Job å·²æ’é˜Ÿï¼›
2. åœ¨å¼€å‘æ§åˆ¶å°æˆ– Setup > Apex Jobs æŸ¥çœ‹æ—¥å¿—ç¡®è®¤ `WarehouseCalloutService` è¢«è°ƒç”¨ï¼›
3. å¦‚æœä½ ä½¿ç”¨äº† Log æˆ– Debugï¼Œå¯ä»¥éªŒè¯åŒæ­¥è¿‡ç¨‹æ˜¯å¦æ‰§è¡Œã€‚

---

### ğŸ§ª **äº”ã€éªŒè¯ï¼šæµ‹è¯•ç±»æ‰§è¡Œä¸è¦†ç›–ç‡**

#### è¿›å…¥ Developer Console æˆ– Setup > Apex Test Executionï¼š

1. æ‰§è¡Œæ‰€æœ‰ Test Classï¼›
2. æŸ¥çœ‹æµ‹è¯•ç»“æœæ˜¯å¦å…¨éƒ¨æˆåŠŸï¼ˆNo Failuresï¼‰ï¼›
3. è¿›å…¥ **Code Coverage** æ ‡ç­¾é¡µï¼Œç¡®ä¿æ‰€æœ‰ç›¸å…³ç±»å’Œ trigger è¦†ç›–ç‡ä¸º **100%**ï¼š

| ç±»/è§¦å‘å™¨                        | ç›®æ ‡è¦†ç›–ç‡       |
| ---------------------------- | ----------- |
| `MaintenanceRequest` Trigger | 100%        |
| `MaintenanceRequestHelper`   | 100%        |
| `WarehouseCalloutService`    | 100%        |
| `WarehouseSyncScheduler`     | 100%        |
| æ‰€æœ‰ Test ç±»                    | Pass + åŒ…å«æ–­è¨€ |

---



